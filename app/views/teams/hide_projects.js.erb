// Hide the team's projects in the navbar
$('#project_sidebar_<%= @team.id %>').addClass('visible').hide('normal');

// Revert to the projects index page in the body of the document
$('#body-main').html('<%= j render("/projects/projects_index") %>');

// Remove the team_checked hidden_field from the team forms
$('.team_checked').each(function() { $(this).remove(); });

// Also remove the the project_checked hidden_field from the project forms;
// we're back in a team context
$('.project_checked').each(function() { $(this).remove(); });

// Set the team's check attribute to false
$('input[name=team_<%= @team.id %>]').attr('checked', false);

// Also, remove the "checked" class from the label for that field. I don't know
// why that wasn't working implicitly.
$('label').each(function() {
  var for_label = $(this).attr('for');
  if ( for_label.substring(0, 8) == "project_" ) { $(this).removeClass('checked'); }
});

// For all project_checkboxes, also set the checked attribute to false
$('input[class=project_checkbox]').each(function() {
  $(this).attr('checked', false);
});
