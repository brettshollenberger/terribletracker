<!DOCTYPE html>
<html>
<head>
  <title>Terrible Tracker</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Lato:400,900' rel='stylesheet' type='text/css'>
</head>
<body>
  <div class="row-fluid">
    <div class="span3" id="sidebar">
      <div class="inner-sidebar" id="inner-sidebar">
        <%= link_to "<span class='terrible'>terrible</span><br><span class='tracker'><h1>TRACKER</h1></span>".html_safe, homepage_path, :class => "logo", remote: true %>
        <div class="todo-search">
          <input class="todo-search-field" type="search" value="" placeholder="Search">
        </div>
        <br>
        <% if current_user %>
          <div id="user-specific-navbar">
            <% current_user.active_teams.each do |team| %>
              <div id="team_sidebar_<%= team.id %>">
          <!-- ################## Team ######################## -->
                <%= form_tag(team_path(team), :class => "team_sidebar", :id => "team_sidebar", remote: true) do %>
                  <%= label_tag("team_#{team.id}", :class => "checkbox") do %>
                    <%= check_box_tag "team_#{team.id}", "#{team.name}", false, :id => "team_#{team.id}", :class => "team_checkbox", data: {toggle: "checkbox"} %>
                    <%= hidden_field_tag :id, "#{team.id}" %>
                    <span id="team_name_<%= team.id %>"><%= team.name %></span>
                  <% end %><!-- End label_tag -->
                  <%= submit_tag "Submit" %>
                <% end %><!-- End team_sidebar form -->
                <% team.projects.each do |project| %>
            <!-- ################# Projects ###################### -->
                  <%= form_tag("/show_project", :class => "project_sidebar", :id => "project_sidebar_#{team.id}", remote: true) do %>
                    <%= label_tag("project_#{project.id}", :class => "checkbox nested_project") do %>
                      <%= check_box_tag "project_#{project.id}", "#{project.title}", false, :id => "project_#{project.id}", data: {toggle: "checkbox"}, :class => "project_checkbox" %>
                      <%= hidden_field_tag :id, "#{project.id}" %>
                      <span id="project_title_<%= project.id %>"><%= project.title %></span>
                    <% end %><!-- End label_tag -->
                    <%= submit_tag "Submit" %>
                  <% end %><!-- End project_sidebar form -->
                <% end %><!-- End team.projects.each -->
              </div><!-- End team_sidebar_(id) div -->
            <% end %><!-- End active_teams.each -->
          </div>
        <br>
        <!-- ################# New Team #################### -->
          <div id="new_team_link">
            <%= link_to "New Team", new_team_path, :class => "btn btn-block profile", remote: true %>
          </div>
          <br>
        <!-- ################## Login ###################### -->
        <%= link_to "Edit Profile", edit_user_registration_path(user: current_user), :class => "btn btn-block profile", remote: true %><br>
        <%= link_to "Logout", logout_path, :class => "btn btn-block profile", :id => "logout-btn" %>
        <% end %><!-- End if current_user -->
      </div>
    </div>
    <div class="span9" id="body-main"><%= yield %></div>
    <div class="span3" id="right-sidebar"></div>
  </div>

</body>
</html>
